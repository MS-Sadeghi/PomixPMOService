<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سامانه استعلام مدارک</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/css/site.css">
</head>
<body>
    <div class="form-container">
        <div class="wrapper">
            <div class="form-header">
                <div class="titles">
                    <div class="title-login">تایید هویت</div>
                </div>
            </div>
            <form id="shahkarForm" class="login-form" autocomplete="off">
                <div class="input-box">
                    <input type="text" id="nationalId" class="input-field" maxlength="10" required>
                    <label for="nationalId" class="label">کد ملی </label>
                    <i class='bx bx-id-card icon'></i>
                </div>
                <div class="input-box">
                    <input type="text" id="mobileNumber" class="input-field" maxlength="11" required>
                    <label for="mobileNumber" class="label">شماره موبایل </label>
                    <i class='bx bx-phone icon'></i>
                </div>
                <div class="input-box">
                    <button type="button" id="verifyShahkarBtn" class="btn-submit">استعلام <i class='bx bx-search'></i></button>
                </div>
                <div id="shahkarFeedback" class="mt-1"></div>
            </form>
            <form id="inquireForm" class="login-form d-none" autocomplete="off">
                <div class="form-header form-header-second">
                    <div class="titles">
                        <div class="title-login">ورود اطلاعات سند</div>
                    </div>
                </div>
                <div class="input-box">
                    <input type="text" id="verificationCode" class="input-field" required>
                    <label for="verificationCode" class="label">رمز تصدیق</label>
                    <i class='bx bx-key icon'></i>
                </div>
                <div class="input-box">
                    <input type="text" id="documentId" class="input-field" required>
                    <label for="documentId" class="label">شناسه سند</label>
                    <i class='bx bx-file icon'></i>
                </div>
                <div class="input-box">
                    <button type="button" id="showDocumentBtn" class="btn-submit">نمایش سند <i class='bx bx-show'></i></button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal fade" id="documentModal" tabindex="-1" aria-labelledby="documentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color: var(--primary-color); color: var(--white-color); border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title" id="documentModalLabel">جزئیات سند</h5>
                    <div class="modal-header d-flex justify-content-end">
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="document-border text-center">
                        <h5>مستند اصالت</h5>
                        <p>تصدیق‌شده توسط قوه قضاییه</p>
                        <div class="mb-3"><strong>شماره ثبت:</strong> <span id="nationalRegisterNo"></span></div>
                        <div class="mb-3"><strong>نوع سند:</strong> <span id="docType"></span></div>
                        <div class="mb-3"><strong>تاریخ سند:</strong> <span id="docDate"></span></div>
                        <div class="mb-3"><strong>دفترخانه:</strong> <span id="scriptoriumName"></span></div>
                    </div>
                    <div class="mb-3">
                        <strong>موکل:</strong>
                        <ul id="moavelDetails" class="list-group"></ul>
                    </div>
                    <div class="mb-3">
                        <strong>وکیل:</strong>
                        <ul id="vakilDetails" class="list-group"></ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="confirmBtn" class="btn" style="background-color: #81c784; color: #fff;">تأیید </button>
                    <button type="button" id="rejectBtn" class="btn" style="background-color: #f28b82; color: #fff;" >عدم تأیید</button>
                    <div id="confirmMessage" class="alert alert-success mt-1 d-none">سند با موفقیت تأیید شد.</div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById("verifyShahkarBtn").addEventListener("click", function () {
            const nationalId = document.getElementById("nationalId").value;
            const mobileNumber = document.getElementById("mobileNumber").value;
            const feedback = document.getElementById("shahkarFeedback");
            if (!nationalId || !mobileNumber) {
                feedback.innerHTML = '<div class="alert alert-danger mt-1">کد ملی و شماره موبایل الزامی است.</div>';
                return;
            }
            feedback.innerHTML = '<div class="alert alert-info mt-1">در حال پردازش...</div>';
            setTimeout(() => {
                if (nationalId === "3241620000" && mobileNumber === "09120000000") {
                    feedback.innerHTML = '<div class="alert alert-success mt-1">تطابق موفق بود. کد پیامک ارسال شد.</div>';
                    document.getElementById("inquireForm").classList.remove("d-none");
                } else {
                    feedback.innerHTML = '<div class="alert alert-danger mt-1">تطابق ناموفق بود.</div>';
                }
            }, 1000);
        });

        document.getElementById("showDocumentBtn").addEventListener("click", function () {
            const verificationCode = document.getElementById("verificationCode").value;
            const documentId = document.getElementById("documentId").value;
            const nationalId = document.getElementById("nationalId").value;
            if (!verificationCode || !documentId) {
                alert("رمز تصدیق و شناسه سند الزامی است.");
                return;
            }

            const sampleData = {
                NationalRegisterNo: documentId,
                DocType: "سند وکالتنامه",
                DocDate: "1402/06/01",
                ScriptoriumName: "دفترخانه اسناد رسمی شماره 37 شهر کرمانشاه",
                lstFindPersonInQuery: [
                    { NationalNo: nationalId, Name: "مبین", Family: "حسین زاده", RoleType: "موکل" },
                    { NationalNo: "0451650000", Name: "علی رضا", Family: "شریفی", RoleType: "وکیل" }
                ]
            };

            document.getElementById("nationalRegisterNo").textContent = sampleData.NationalRegisterNo;
            document.getElementById("docType").textContent = sampleData.DocType;
            document.getElementById("docDate").textContent = sampleData.DocDate;
            document.getElementById("scriptoriumName").textContent = sampleData.ScriptoriumName;

            const moavelList = document.getElementById("moavelDetails");
            const vakilList = document.getElementById("vakilDetails");
            moavelList.innerHTML = "";
            vakilList.innerHTML = "";

            sampleData.lstFindPersonInQuery.forEach(person => {
                const li = document.createElement("li");
                li.textContent = `${person.Name} ${person.Family} (کد ملی: ${person.NationalNo}) - نقش: ${person.RoleType}`;
                li.classList.add("list-group-item");
                if (person.RoleType === "موکل" && person.NationalNo === nationalId) moavelList.appendChild(li);
                else if (person.RoleType === "وکیل") vakilList.appendChild(li);
            });

            new bootstrap.Modal(document.getElementById("documentModal")).show();
        });

        document.getElementById("confirmBtn").addEventListener("click", function () {
            document.getElementById("confirmMessage").classList.remove("d-none");
            alert("سند تأیید شد.");
        });

        document.getElementById("rejectBtn").addEventListener("click", function () {
            document.getElementById("confirmMessage").classList.add("d-none");
            alert("سند رد شد.");
            new bootstrap.Modal(document.getElementById("documentModal")).hide();
        });
    </script>
</body>
</html>